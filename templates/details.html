{% extends "layout.html" %}
{% block content %}
<h2>{{ item['title'] }}</h2>

{% if item['image'] %}
<img src="{{ item['image'] }}" class="img-fluid mb-3">
{% endif %}

<p><strong>Category:</strong> {{ item['category'] }}</p>
<p><strong>Description:</strong> {{ item['description'] }}</p>
<p><strong>Location:</strong> {{ item['location'] }}</p>
<p><strong>Owner:</strong> {{ item['giver'] }}</p>

{% if item['claimed'] == 1 %}
    <p class="text-warning"><strong>Claimed by:</strong> {{ item['claimer'] }}</p>
    {% if session.get('username') in [item['claimer'], item['giver']] %}
    <div class="d-flex gap-2 mt-2">
        <a href="/messages/{{ item['id'] }}" class="btn btn-info flex-fill">Message</a>
        {% if session.get('username') == item['giver'] %}
        <form method="POST" action="/delete_item/{{ item['id'] }}" class="flex-fill" onsubmit="return confirm('Are you sure you want to delete this item?');">
            <button type="submit" class="btn btn-danger w-100">Delete Item</button>
        </form>
        {% endif %}
    </div>
    {% endif %}
{% else %}
    <a href="/claim/{{ item['id'] }}" class="btn btn-success mt-2">Claim Item</a>
{% endif %}
{% endblock %}
